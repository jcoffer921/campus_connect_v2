{% extends 'base.html' %}
{% load static %}

{% block title %}Campus Connect | Discussions{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/discussions.css' %}">

<div class="container mt-5 mb-5">
    <h2 class="fw-bold text-center mb-4 text-primary">Discussions</h2>

    <div class="d-flex justify-content-between mb-4">
        <input type="text" class="form-control w-75" placeholder="Search discussions...">
        <a href="{% url 'new_discussion' %}" class="btn btn-primary">+ New Discussion</a>
    </div>

    <!-- Discussion Cards -->
    {% for discussion in discussions %}
    <div class="card shadow-sm mb-4 discussion-card p-3">
        <div class="d-flex justify-content-between align-items-center">
            <h5 class="fw-bold">{{ discussion.title }}</h5>
            <small class="text-muted">{{ discussion.date_posted|date:"M d, Y" }}</small>
        </div>
        <p class="mb-1 text-muted">Posted by {{ discussion.author }}</p>
        <p>{{ discussion.preview|truncatewords:20 }}</p>
        <div class="d-flex justify-content-between align-items-center">
            <div class="text-muted">
                ❤️ {{ discussion.likes }} likes
            </div>
            <a href="{% url 'discussion_detail' discussion.id %}" class="btn btn-outline-primary btn-sm">
                View Discussion
            </a>
        </div>
    </div>
    {% empty %}
    <p class="text-center text-muted">No discussions yet. Be the first to start one!</p>
    {% endfor %}
</div>


{% endblock %}